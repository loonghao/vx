# setup å‘½ä»¤

ä» `vx.toml` å®‰è£…æ‰€æœ‰é¡¹ç›®å·¥å…·ã€‚

## è¯­æ³•

```bash
vx setup [OPTIONS]
```

## æè¿°

`vx setup` å‘½ä»¤æ˜¯**åŠ å…¥é¡¹ç›®æˆ–å…‹éš†ä»“åº“åé¦–å…ˆè¦è¿è¡Œçš„å‘½ä»¤**ã€‚å®ƒè¯»å–é¡¹ç›®çš„ `vx.toml` é…ç½®å¹¶ï¼š

1. æ£€æŸ¥å“ªäº›å·¥å…·å·²å®‰è£…
2. å°†æ‰€æœ‰ç¼ºå¤±çš„å·¥å…·å®‰è£…åˆ° `~/.vx/store/`
3. æŠ¥å‘Šå®‰è£…çŠ¶æ€

è¿™ç¡®ä¿æ‰€æœ‰å›¢é˜Ÿæˆå‘˜æ‹¥æœ‰å®Œå…¨ç›¸åŒçš„å·¥å…·ç‰ˆæœ¬ã€‚

## é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `-f`, `--force` | å¼ºåˆ¶é‡æ–°å®‰è£…æ‰€æœ‰å·¥å…· |
| `--dry-run` | é¢„è§ˆæ“ä½œè€Œä¸æ‰§è¡Œ |
| `-v`, `--verbose` | æ˜¾ç¤ºè¯¦ç»†è¾“å‡º |
| `--no-parallel` | ç¦ç”¨å¹¶è¡Œå®‰è£… |

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šåˆå§‹é¡¹ç›®è®¾ç½®

å…‹éš†å¸¦æœ‰ `vx.toml` çš„é¡¹ç›®æ—¶ï¼š

```bash
git clone https://github.com/example/project.git
cd project
vx setup
```

è¾“å‡ºï¼š

```
ğŸš€ VX Development Environment Setup

Checking tool status...

Tools:
  âœ“ node@20.10.0 (installed)
  âœ— uv@0.5.14 (missing)
  âœ— go@1.21.5 (missing)

Installing 2 tool(s)...
  âœ“ uv@0.5.14
  âœ“ go@1.21.5

âœ“ Successfully installed 2 tool(s) in 12.3s

Next steps:
  1. Enter dev environment: vx dev
  2. Or run tools directly: vx <tool> [args]

Available scripts:
  vx run dev -> npm run dev
  vx run test -> pytest
```

### åœºæ™¯ 2ï¼šCI/CD æµæ°´çº¿

åœ¨ CI/CD ä¸­è¿è¡Œ `vx setup` ç¡®ä¿å·¥å…·å¯ç”¨ï¼š

```yaml
# GitHub Actions
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: å®‰è£… vx
        run: curl -fsSL https://get.vx.dev | bash

      - name: å®‰è£…é¡¹ç›®å·¥å…·
        run: vx setup

      - name: æ„å»º
        run: vx dev -c "npm run build"
```

### åœºæ™¯ 3ï¼šå¼ºåˆ¶é‡æ–°å®‰è£…

å¦‚æœæ€€ç–‘å·¥å…·æŸåæˆ–éœ€è¦å…¨æ–°å®‰è£…ï¼š

```bash
vx setup --force
```

è¿™å°†é‡æ–°å®‰è£…æ‰€æœ‰å·¥å…·ï¼Œå³ä½¿å®ƒä»¬çœ‹èµ·æ¥å·²å®‰è£…ã€‚

### åœºæ™¯ 4ï¼šé¢„è§ˆæ›´æ”¹

æŸ¥çœ‹å°†å®‰è£…ä»€ä¹ˆè€Œä¸å®é™…å®‰è£…ï¼š

```bash
vx setup --dry-run
```

è¾“å‡ºï¼š

```
ğŸš€ VX Development Environment Setup

Tools:
  âœ“ node@20.10.0 (installed)
  âœ— uv@0.5.14 (missing)
  âœ— go@1.21.5 (missing)

Would install 2 tool(s):
  - uv@0.5.14
  - go@1.21.5
```

## é…ç½®

setup ä» `vx.toml` è¯»å–ï¼š

```toml
[tools]
node = "20"
uv = "latest"
go = "1.21"

[settings]
auto_install = true    # åœ¨ vx dev ä¸­è‡ªåŠ¨å®‰è£…ç¼ºå¤±å·¥å…·
parallel_install = true # å¹¶è¡Œå®‰è£…å·¥å…·

[scripts]
dev = "npm run dev"
test = "pytest"
build = "npm run build"
```

## å·¥å…·å­˜å‚¨

æ‰€æœ‰å·¥å…·éƒ½å®‰è£…åˆ°å…¨å±€ store `~/.vx/store/`ï¼š

```
~/.vx/
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ node/
â”‚   â”‚   â”œâ”€â”€ 20.10.0/
â”‚   â”‚   â””â”€â”€ 18.19.0/
â”‚   â”œâ”€â”€ uv/
â”‚   â”‚   â””â”€â”€ 0.5.14/
â”‚   â””â”€â”€ go/
â”‚       â””â”€â”€ 1.21.5/
â””â”€â”€ bin/
```

è¿™ç§å†…å®¹å¯»å€å­˜å‚¨å…è®¸ï¼š

- å¤šä¸ªé¡¹ç›®å…±äº«ç›¸åŒçš„å·¥å…·ç‰ˆæœ¬
- ä¸æµªè´¹ç£ç›˜ç©ºé—´åœ¨é‡å¤æ–‡ä»¶ä¸Š
- å¿«é€Ÿåˆ‡æ¢ç‰ˆæœ¬

## å·¥ä½œæµï¼šsetup vs dev

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é¡¹ç›®å·¥ä½œæµ                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. å…‹éš†é¡¹ç›®                                                    â”‚
â”‚      git clone https://github.com/example/project.git            â”‚
â”‚                                                                  â”‚
â”‚   2. å®‰è£…å·¥å…·ï¼ˆä¸€æ¬¡æ€§ï¼‰                                          â”‚
â”‚      vx setup                                                    â”‚
â”‚                                                                  â”‚
â”‚   3. è¿›å…¥å¼€å‘ç¯å¢ƒï¼ˆæ—¥å¸¸ï¼‰                                        â”‚
â”‚      vx dev                                                      â”‚
â”‚      # æˆ–                                                        â”‚
â”‚      eval "$(vx dev --export)"                                   â”‚
â”‚                                                                  â”‚
â”‚   4. è¿è¡Œé¡¹ç›®è„šæœ¬                                                â”‚
â”‚      vx run dev                                                  â”‚
â”‚      vx run test                                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| å‘½ä»¤ | ç”¨é€” | ä½¿ç”¨æ—¶æœº |
|------|------|----------|
| `vx setup` | å®‰è£…å·¥å…· | é¦–æ¬¡ä½¿ç”¨ã€`vx.toml` å˜æ›´å |
| `vx dev` | è¿›å…¥ç¯å¢ƒ | æ—¥å¸¸å¼€å‘ |
| `vx dev --export` | åœ¨å½“å‰ shell æ¿€æ´» | IDE é›†æˆã€è„šæœ¬ |
| `vx run <script>` | è¿è¡Œå®šä¹‰çš„è„šæœ¬ | æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½² |

## é€€å‡ºç 

| ä»£ç  | å«ä¹‰ |
|------|------|
| 0 | æˆåŠŸ - æ‰€æœ‰å·¥å…·å·²å®‰è£… |
| 1 | é”™è¯¯ - éƒ¨åˆ†å·¥å…·å®‰è£…å¤±è´¥ |

## æç¤º

1. **git pull åè¿è¡Œ**ï¼šå¦‚æœ `vx.toml` å¯èƒ½å·²æ›´æ”¹ï¼š

   ```bash
   git pull && vx setup
   ```

2. **åœ¨ git hooks ä¸­ä½¿ç”¨**ï¼šcheckout æ—¶è‡ªåŠ¨è®¾ç½®ï¼š

   ```bash
   # .git/hooks/post-checkout
   #!/bin/sh
   vx setup --dry-run | grep -q "missing" && vx setup
   ```

3. **è°ƒè¯•æ—¶ä½¿ç”¨è¯¦ç»†æ¨¡å¼**ï¼š

   ```bash
   vx setup --verbose
   ```

4. **å¹¶è¡Œæ›´å¿«**ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå·¥å…·å¹¶è¡Œå®‰è£…ã€‚ä»…åœ¨é‡åˆ°é—®é¢˜æ—¶ä½¿ç”¨ `--no-parallel`ã€‚

## å‚è§

- [init](/zh/cli/commands#init) - åˆå§‹åŒ–é¡¹ç›®é…ç½®
- [dev](dev) - è¿›å…¥å¼€å‘ç¯å¢ƒ
- [sync](/zh/cli/commands#sync) - åŒæ­¥å·¥å…·ä¸é…ç½®
