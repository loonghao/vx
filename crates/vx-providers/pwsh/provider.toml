# PowerShell Provider Manifest
#
# PowerShell (pwsh) is the modern, cross-platform command-line shell and scripting language.
# Official releases: https://github.com/PowerShell/PowerShell/releases
# Download format: PowerShell-{version}-{platform}.zip/.tar.gz

[provider]
name = "pwsh"
description = "Cross-platform command-line shell and scripting language"
homepage = "https://docs.microsoft.com/en-us/powershell/"
repository = "https://github.com/PowerShell/PowerShell"
ecosystem = "system"

# PowerShell 7 (pwsh)
[[runtimes]]
name = "pwsh"
description = "PowerShell 7+ (cross-platform)"
executable = "pwsh"
aliases = ["powershell", "ps"]

# GitHub releases as version source
[runtimes.versions]
source = "github-releases"
owner = "PowerShell"
repo = "PowerShell"
strip_v_prefix = true

# RFC 0019: Executable Layout Configuration
[runtimes.layout]
download_type = "archive"

[runtimes.layout.archive]
# PowerShell archives extract files directly without subdirectory
executable_paths = [
    "pwsh.exe",  # Windows
    "pwsh"       # Unix
]

[runtimes.platforms.windows]
executable_extensions = [".exe"]

[runtimes.platforms.unix]
executable_extensions = []

[provider.platforms]
os = ["windows", "linux", "macos"]
