# Xcode Build Tools Provider Manifest
# This file defines the metadata, runtimes, and dependency constraints for Xcode build tools.

[provider]
name = "xcodebuild"
description = "Apple Xcode build tools"
homepage = "https://developer.apple.com/xcode"
repository = "https://developer.apple.com/xcode"
ecosystem = "system"
license = "Proprietary"
license_note = "Apple Xcode - free to use, proprietary license. vx only detects system installation"

# Xcode tools are macOS-only
[provider.platforms]
os = ["macos"]

# xcodebuild - main build tool
[[runtimes]]
name = "xcodebuild"
description = "Build Xcode projects and workspaces"
executable = "xcodebuild"

[runtimes.versions]
source = "system"  # Detect from system installation

[runtimes.platforms.macos]
executable_extensions = []
search_paths = [
    "/usr/bin",
    "/Applications/Xcode.app/Contents/Developer/usr/bin"
]
# Set DEVELOPER_DIR environment variable
env = { DEVELOPER_DIR = "/Applications/Xcode.app/Contents/Developer" }

# xcrun - Xcode command line tool runner
[[runtimes]]
name = "xcrun"
description = "Run or locate development tools"
executable = "xcrun"

[runtimes.versions]
source = "system"

[runtimes.platforms.macos]
executable_extensions = []
search_paths = ["/usr/bin"]

# xcode-select - Xcode path management
[[runtimes]]
name = "xcode-select"
description = "Manage active Xcode installation"
executable = "xcode-select"

[runtimes.versions]
source = "system"

[runtimes.platforms.macos]
executable_extensions = []
search_paths = ["/usr/bin"]

# swift - Swift compiler (bundled with Xcode)
[[runtimes]]
name = "swift"
description = "Swift programming language compiler"
executable = "swift"
bundled_with = "xcodebuild"

[runtimes.versions]
source = "system"

[runtimes.platforms.macos]
executable_extensions = []
search_paths = [
    "/usr/bin",
    "/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin"
]

# swiftc - Swift compiler
[[runtimes]]
name = "swiftc"
description = "Swift compiler"
executable = "swiftc"
bundled_with = "xcodebuild"

[runtimes.versions]
source = "system"

[runtimes.platforms.macos]
executable_extensions = []
search_paths = [
    "/usr/bin",
    "/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin"
]

# No external dependencies - Xcode tools are self-contained
[[runtimes.constraints]]
when = "*"
recommends = []