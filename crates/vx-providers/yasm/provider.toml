# YASM Provider Manifest
# This file defines the metadata, runtimes, and dependency constraints for YASM.

[provider]
name = "yasm"
description = "YASM - Modular Assembler with multiple output formats"
homepage = "https://yasm.tortall.net/"
repository = "https://github.com/yasm/yasm"
ecosystem = "system"

# YASM
[[runtimes]]
name = "yasm"
description = "YASM - Yet Another Assembler"
executable = "yasm"

[runtimes.versions]
source = "github-releases"
owner = "yasm"
repo = "yasm"

# RFC 0019: Executable Layout Configuration
# YASM 下载的是单个可执行文件，需要重命名和移动到 bin/
[runtimes.layout]
download_type = "binary"

# Windows x86_64
[runtimes.layout.binary."windows-x86_64"]
source_name = "yasm-{version}-win64.exe"
target_name = "yasm.exe"
target_dir = "bin"

# Windows x86
[runtimes.layout.binary."windows-x86"]
source_name = "yasm-{version}-win32.exe"
target_name = "yasm.exe"
target_dir = "bin"

# macOS x86_64
[runtimes.layout.binary."macos-x86_64"]
source_name = "yasm-{version}-macos"
target_name = "yasm"
target_dir = "bin"
target_permissions = "755"

# Linux x86_64
[runtimes.layout.binary."linux-x86_64"]
source_name = "yasm-{version}-linux"
target_name = "yasm"
target_dir = "bin"
target_permissions = "755"

[runtimes.platforms.windows]
executable_extensions = [".exe"]

[runtimes.platforms.unix]
executable_extensions = []

# YASM is self-contained, no external dependencies
[[runtimes.constraints]]
when = "*"
recommends = []

