# Spack Provider Manifest
# This file defines the metadata, runtimes, and dependency constraints for Spack.

[provider]
name = "spack"
description = "Flexible package manager for supercomputers, Linux, and macOS"
homepage = "https://spack.io"
repository = "https://github.com/spack/spack"
ecosystem = "python"

# Spack only works on Unix-like systems (Linux and macOS)
[provider.platforms]
os = ["linux", "macos"]

# Spack
[[runtimes]]
name = "spack"
description = "Spack package manager"
executable = "spack"

[runtimes.versions]
source = "github-releases"
owner = "spack"
repo = "spack"
strip_v_prefix = true

# Note: Spack is typically cloned from git, not a binary release
# Layout configuration may not be needed

[runtimes.platforms.windows]
executable_extensions = [".exe", ".bat"]

[runtimes.platforms.unix]
executable_extensions = []

# Spack requires Python 3.6+
[[runtimes.constraints]]
when = "*"
requires = [
    { runtime = "python", version = ">=3.6", recommended = "3.11", reason = "Spack requires Python 3.6+" }
]
recommends = [
    { runtime = "git", version = "*", reason = "Git is required for fetching packages" }
]
