[tools]
cmake = "latest"
python = "3.11"
uv = "latest"
rust = "system"  # Use system-installed rust/cargo

[settings]
cache_duration = "7d"
auto_install = true
# isolation = true  # Default: isolated environment (only vx-managed tools in PATH)
# Pass through specific environment variables to the dev environment (like tox's passenv)
passenv = [
    "CARGO_*",      # Cargo configuration
    "RUSTUP_*",     # Rustup configuration  
    "GITHUB_*",     # GitHub Actions environment
    "CI",           # CI indicator
    "RUST_LOG",     # Logging level
]

[scripts]
build = "cargo build"
check = "cargo check --workspace --all-targets"
ci-docs = "cargo doc --all-features --no-deps --document-private-items"
ci-quality = "echo 'Running CI quality checks...'"
ci-test-full = "cargo test --workspace"
ci-test-targeted = "cargo test -p vx-provider-* -p vx-cli -p vx-extension -p vx-migration -p vx-resolver -p vx-runtime"
clippy = "cargo clippy --workspace --all-targets -- -D warnings"
fmt = "cargo fmt --all"
fmt-check = "cargo fmt --all -- --check"
just = "just {{args}}"
lint = "cargo clippy --workspace --all-targets -- -D warnings"
nox = "uv run nox {{args}}"
nox-test = "uv run nox -s tests"
release = "cargo build --release"
test = "cargo test --workspace"
test-all = "cargo test --workspace --all-targets"
test-core = "cargo test -p vx-provider-* -p vx-cli -p vx-extension -p vx-migration -p vx-resolver -p vx-runtime"
test-doc = "cargo test --workspace --doc"
test-integration = "cargo test --workspace --test '*'"
test-lib = "cargo test --workspace --lib"
test-pkgs = "cargo test {{args}}"
test-python = "cargo test {{args}}"
test-runtime = "cargo test {{args}}"
tox = "uv run tox {{args}}"
