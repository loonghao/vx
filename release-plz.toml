# release-plz configuration
# https://release-plz.ieni.dev/docs/config

[workspace]
# Only process the main package, not workspace members
allow_dirty = true
# Disable automatic publishing of workspace members
publish = false

# Simple changelog configuration
[changelog]
header = """
# Changelog

All notable changes to this project will be documented in this file.

"""

# Basic commit parsing
commit_parsers = [
    { message = "^feat", group = "Features" },
    { message = "^fix", group = "Bug Fixes" },
    { message = "^doc", group = "Documentation" },
    { message = "^perf", group = "Performance" },
    { message = "^refactor", group = "Refactor" },
    { message = "^style", group = "Styling" },
    { message = "^test", group = "Testing" },
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore|^ci", group = "Miscellaneous Tasks" },
    { message = "^revert", group = "Revert" },
]

# Package-specific configuration - only process main package
[[package]]
name = "vx"
# Enable changelog for the main package
changelog_update = true
# Enable git tag creation
git_tag_enable = true
# Git tag name template
git_tag_name = "v{{version}}"
# Enable GitHub release creation
git_release_enable = true
# Release name template
git_release_name = "v{{version}}"
# Enable release draft mode for review
git_release_draft = false
# Disable automatic publishing to crates.io for now
# We'll handle crates.io publishing manually or via separate workflow
publish = false
# Custom release body template
git_release_body = """
## What's Changed

{{ changelog }}

**Full Changelog**: https://github.com/loonghao/vx/compare/{{ previous_tag }}...{{ tag }}

## Installation

### Download Binary
Download the appropriate binary for your platform from the assets below.

### Package Managers
- **Windows (WinGet)**: `winget install loonghao.vx`
- **Windows (Chocolatey)**: `choco install vx`
- **macOS (Homebrew)**: `brew install loonghao/vx/vx`
- **Windows (Scoop)**: `scoop bucket add vx https://github.com/loonghao/scoop-vx && scoop install vx`

### Cargo
```bash
cargo install vx
```
"""

# Disable publishing for workspace member packages
[[package]]
name = "vx-core"
publish = false

[[package]]
name = "vx-cli"
publish = false

[[package]]
name = "vx-tool-node"
publish = false

[[package]]
name = "vx-tool-go"
publish = false

[[package]]
name = "vx-tool-rust"
publish = false

[[package]]
name = "vx-tool-uv"
publish = false

[[package]]
name = "vx-pm-npm"
publish = false
