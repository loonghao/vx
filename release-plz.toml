# release-plz configuration
# https://release-plz.ieni.dev/docs/config

[workspace]
# Allow dirty working directories for development
allow_dirty = true
# Generate releases based on conventional commits, not registry state
release_always = true
# Disable automatic publishing to crates.io (use post-release workflow)
publish = false
# Process packages based on git changes only
git_release_enable = true
# Skip dependency checks that require registry access
dependencies_update = false

# Simple changelog configuration
[changelog]
header = """
# Changelog

All notable changes to this project will be documented in this file.

"""

# Basic commit parsing
commit_parsers = [
    { message = "^feat", group = "Features" },
    { message = "^fix", group = "Bug Fixes" },
    { message = "^doc", group = "Documentation" },
    { message = "^perf", group = "Performance" },
    { message = "^refactor", group = "Refactor" },
    { message = "^style", group = "Styling" },
    { message = "^test", group = "Testing" },
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore|^ci", group = "Miscellaneous Tasks" },
    { message = "^revert", group = "Revert" },
]

# Package-specific configuration - only process main package
[[package]]
name = "vx"
# Enable processing for the main package only
release = true
# Enable changelog for the main package
changelog_update = true
# Enable git tag creation
git_tag_enable = true
# Git tag name template
git_tag_name = "v{{version}}"
# Enable GitHub release creation
git_release_enable = true
# Release name template
git_release_name = "v{{version}}"
# Enable release draft mode for review
git_release_draft = false
# Disable automatic publishing (use post-release workflow)
publish = false
# Generate releases based on git history, not registry state
git_release_type = "auto"
# Custom release body template
git_release_body = """
## What's Changed

{{ changelog }}

**Full Changelog**: https://github.com/loonghao/vx/compare/{{ previous_tag }}...{{ tag }}

## Installation

### Download Binary
Download the appropriate binary for your platform from the assets below.

### Package Managers
- **Windows (WinGet)**: `winget install loonghao.vx`
- **Windows (Chocolatey)**: `choco install vx`
- **macOS (Homebrew)**: `brew install loonghao/vx/vx`
- **Windows (Scoop)**: `scoop bucket add vx https://github.com/loonghao/scoop-vx && scoop install vx`

### Cargo
```bash
cargo install vx
```
"""

# Workspace member packages are handled by the smart publishing script
# Only the main package is managed by release-plz for GitHub releases
