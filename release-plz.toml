# release-plz configuration
# https://release-plz.ieni.dev/docs/config

[workspace]
# Allow dirty working directories for development
allow_dirty = true
# Only release when merging release PR, not on every commit
release_always = false
# Enable automatic publishing to crates.io
publish = true
# Set timeout for publishing operations
publish_timeout = "10m"

# Simple changelog configuration
[changelog]
header = """
# Changelog

All notable changes to this project will be documented in this file.

"""

# Basic commit parsing
commit_parsers = [
    { message = "^feat", group = "Features" },
    { message = "^fix", group = "Bug Fixes" },
    { message = "^doc", group = "Documentation" },
    { message = "^perf", group = "Performance" },
    { message = "^refactor", group = "Refactor" },
    { message = "^style", group = "Styling" },
    { message = "^test", group = "Testing" },
    { message = "^chore\\(release\\): prepare for", skip = true },
    { message = "^chore\\(deps.*\\)", skip = true },
    { message = "^chore|^ci", group = "Miscellaneous Tasks" },
    { message = "^revert", group = "Revert" },
]

# Package-specific configuration - only process main package
[[package]]
name = "vx"
# Enable processing for the main package only
release = true
# Enable changelog for the main package
changelog_update = true
# Enable git tag creation
git_tag_enable = true
# Git tag name template
git_tag_name = "v{{version}}"
# Enable GitHub release creation
git_release_enable = true
# Release name template
git_release_name = "v{{version}}"
# Enable release draft mode for review
git_release_draft = false
# Enable automatic publishing to crates.io
publish = true
# Custom release body template
git_release_body = """
## What's Changed

{{ changelog }}

**Full Changelog**: https://github.com/loonghao/vx/compare/{{ previous_tag }}...{{ tag }}

## Installation

### Download Binary
Download the appropriate binary for your platform from the assets below.

### Package Managers
- **Windows (WinGet)**: `winget install loonghao.vx`
- **Windows (Chocolatey)**: `choco install vx`
- **macOS (Homebrew)**: `brew install loonghao/vx/vx`
- **Windows (Scoop)**: `scoop bucket add vx https://github.com/loonghao/scoop-vx && scoop install vx`

### Cargo
```bash
cargo install vx
```
"""

# Workspace member packages configuration
# All packages are processed for version management and changelog generation
# Enable publishing for all packages

[[package]]
name = "vx-core"
# Enable processing for version management
release = true
# Enable automatic publishing
publish = true

[[package]]
name = "vx-cli"
release = true
publish = true

[[package]]
name = "vx-shim"
release = true
publish = true

[[package]]
name = "vx-tool-node"
release = true
publish = true

[[package]]
name = "vx-tool-go"
release = true
publish = true

[[package]]
name = "vx-tool-rust"
release = true
publish = true

[[package]]
name = "vx-tool-uv"
release = true
publish = true

[[package]]
name = "vx-pm-npm"
release = true
publish = true
